<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gallery – Torstein Vabo Ansari</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>
<body id="gallery">
  <nav class="navbar">
    <a href="index.html" class="logo">Torstein Vabo Ansari</a>
    <input type="checkbox" id="nav-toggle" class="nav-toggle" />
    <label for="nav-toggle" class="nav-toggle-label">&#9776;</label>
    <ul class="nav-links">
      <li><a href="index.html">Home</a></li>
      <li><a href="about.html">About</a></li>
      <li><a href="work.html">Work</a></li>
      <li><a href="values.html">Values</a></li>
      <li><a href="gallery.html" class="active">Gallery</a></li>
    </ul>
  </nav>

  <header class="hero" id="hero-gallery">
    <div class="hero-content">
      <h1>Moments</h1>
    </div>
  </header>

<!-- Filters -->
<section class="gallery-controls container">
  <button class="chip is-active" data-filter="all">All</button>
  <button class="chip" data-filter="expedition">Expedition</button>
  <button class="chip" data-filter="family">Family</button>
  <button class="chip" data-filter="retreat">Retreat</button>
  <button class="chip" data-filter="personal">Personal</button>
</section>

<!-- Grid -->
<section class="gallery-grid container" id="galleryGrid" aria-live="polite">
  <!-- One image per card; href === src so lightbox shows the same file -->
  <figure class="card" data-cat="expedition">
    <a href="images/expedition/expedition1.jpg">
      <img
        src="images/expedition/expedition1.jpg"
        alt="Denali"
        loading="lazy"
        decoding="async"
      />
    </a>
    <figcaption>Denali</figcaption>
  </figure>

  <figure class="card" data-cat="family">
    <a href="images/family/family1.jpg">
      <img
        src="images/family/family1.jpg"
        alt="Alayah"
        loading="lazy"
        decoding="async"
      />
    </a>
    <figcaption>Alayah</figcaption>
  </figure>

  <figure class="card" data-cat="retreat">
    <a href="images/retreat/retreat1.jpg">
      <img
        src="images/retreat/ice-dip.jpg"
        alt="Beautiful group with Jesus, Gracia and Delfina"
        loading="lazy"
        decoding="async"
      />
    </a>
    <figcaption>Beautiful group with Jesus, Gracia and Delfina</figcaption>
  </figure>

  <figure class="card" data-cat="personal">
    <a href="images/personal/personal3.jpg">
      <img
        src="images/personal/personal3.jpg"
        alt="Me and Hans finishing Uni"
        loading="lazy"
        decoding="async"
      />
    </a>
    <figcaption>Me and Hans finishing Uni</figcaption>
  </figure>

  <!-- Add more <figure class="card" data-cat="expedition|family|retreat|community|personal">... -->
</section>

  <!-- Lightbox -->
  <div class="lightbox" id="lightbox" aria-hidden="true" role="dialog" aria-label="Image viewer">
    <button class="lb-close" aria-label="Close (Esc)">&times;</button>
    <button class="lb-prev" aria-label="Previous (←)">&larr;</button>
    <figure class="lb-figure">
      <img id="lbImg" alt="" />
      <figcaption id="lbCap"></figcaption>
    </figure>
    <button class="lb-next" aria-label="Next (→)">&rarr;</button>
  </div>

  <script>
    // --- Filtering ---
    const chips = document.querySelectorAll('.gallery-controls .chip');
    const cards = document.querySelectorAll('.gallery-grid .card');
    chips.forEach(btn => {
      btn.addEventListener('click', () => {
        chips.forEach(b => b.classList.remove('is-active'));
        btn.classList.add('is-active');
        const f = btn.dataset.filter;
        cards.forEach(card => {
          const show = f === 'all' || card.dataset.cat.includes(f);
          card.style.display = show ? '' : 'none';
        });
      });
    });

    // --- Lightbox ---
    const lightbox = document.getElementById('lightbox');
    const lbImg = document.getElementById('lbImg');
    const lbCap = document.getElementById('lbCap');
    const closeBtn = lightbox.querySelector('.lb-close');
    const prevBtn = lightbox.querySelector('.lb-prev');
    const nextBtn = lightbox.querySelector('.lb-next');

    const galleryItems = Array.from(document.querySelectorAll('#galleryGrid figure a'));
    let idx = -1;

    function openLB(i) {
      idx = i;
      const a = galleryItems[idx];
      const fig = a.closest('figure');
      const full = a.getAttribute('href');
      const cap = fig.querySelector('figcaption')?.textContent || a.querySelector('img')?.alt || '';
      lbImg.src = full;
      lbImg.alt = cap;
      lbCap.textContent = cap;
      lightbox.setAttribute('aria-hidden', 'false');
      document.body.style.overflow = 'hidden';
      lightbox.classList.add('open');
      closeBtn.focus();
      history.pushState({ lb: true }, '', '#photo-' + idx); // optional deep-link
    }
    function closeLB() {
      lightbox.setAttribute('aria-hidden', 'true');
      document.body.style.overflow = '';
      lightbox.classList.remove('open');
      lbImg.removeAttribute('src');
      if (location.hash.startsWith('#photo-')) history.replaceState(null, '', ' ');
    }
    function nextLB(dir = 1) {
      if (!galleryItems.length) return;
      idx = (idx + dir + galleryItems.length) % galleryItems.length;
      openLB(idx);
    }

    galleryItems.forEach((a, i) => {
      a.addEventListener('click', (e) => {
        e.preventDefault();
        openLB(i);
      });
    });

    closeBtn.addEventListener('click', closeLB);
    prevBtn.addEventListener('click', () => nextLB(-1));
    nextBtn.addEventListener('click', () => nextLB(1));
    lightbox.addEventListener('click', (e) => {
      if (e.target === lightbox) closeLB();
    });

    // Keyboard support
    window.addEventListener('keydown', (e) => {
      if (lightbox.classList.contains('open')) {
        if (e.key === 'Escape') closeLB();
        if (e.key === 'ArrowRight') nextLB(1);
        if (e.key === 'ArrowLeft') nextLB(-1);
      }
    });

    // Simple swipe (touch)
    let startX = 0;
    lbImg.addEventListener('touchstart', (e) => startX = e.touches[0].clientX, {passive:true});
    lbImg.addEventListener('touchend', (e) => {
      const dx = e.changedTouches[0].clientX - startX;
      if (Math.abs(dx) > 40) nextLB(dx < 0 ? 1 : -1);
    }, {passive:true});

    // Deep-link open (#photo-N)
    if (location.hash.startsWith('#photo-')) {
      const n = parseInt(location.hash.split('-')[1], 10);
      if (!Number.isNaN(n) && n >= 0 && n < galleryItems.length) openLB(n);
    }
  </script>


  <div class="footer-cta-wrap">
    <div class="footer-cta">
      <h2>Let’s connect</h2>
      <p>Real conversations. Real projects. Real responsibility.</p>
      <div class="actions">
        <a class="btn-pill" href="mailto:vabo.torstein@gmail.com">Email me</a>
        <a class="btn-pill" href="https://www.linkedin.com/in/torstein-vabo-ansari" target="_blank" rel="noopener">LinkedIn</a>
      </div>
    </div>
  </div>

  <footer class="footer-bottom">
  <p>© 2025 Torstein Vabo Ansari · Norway</p>
</footer>

  
